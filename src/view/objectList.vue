<style>
	  div,span{font-family: Avenir, Helvetica, sans-serif;}
	  .SELECTx{background-color: transparent;border-radius: 5px; }
	  option{line-heigh:1rem;}
	@media screen and (min-width: 1200px){
				.coloa{color:#FFFFFF;font-size: 3rem;}
					.colob{color:#FFFFFF;font-size: 64px;}
					.coloc{color:#FFFFFF;font-size: 2.5rem;}
					.colod{color:#F4CB13;font-size: 1rem;}
					.coloe{color:#FFFFFF;font-size: 2.9rem;}
					.colof{color: #F2D91C;font-size: 1.5rem;}
					.twA{width: 100px;}
					.twB{width: 300px;}
					.tableline{ display: inline-block;border:1px solid #ddd;color:#fff;text-align: center;}
					.topA{margin-top: 1rem;} .topB{margin-top: 2rem;} .topC{margin-top: 3rem;}
					.txtTa{position: absolute;z-index: 100; ;margin-top: 6.5rem;width:132px;margin-left: 4px;}
					.el-input{height: 100%;}
					.el-input__wrapper{background-color:transparent!important;box-shadow:none!important;}
					.el-input__wrapper.is-focus{background-color:transparent!important;box-shadow:none!important;}
					.el-input__inner{font-size: 2rem!important; color: #6C1703!important;} 
					.imga{height: 80px;background-size: cover;position: absolute;margin-left: 50%;z-index: 100;top:1.5rem;left:-40px;}
					.imgax{height: 60px;background-size: cover;position: absolute;margin-left: 50%;z-index: 100;top:1.5rem;left:-30px;}
					.next{display: inline-block;position: absolute;;font-size: 3rem; width:400px;left: 50%;margin-left: -200px;  margin-top: 1rem;}
					.buttonA{position: absolute;bottom: -10rem;margin-left: 50%;
					left: -400px;
				}
					.inputbox{position: absolute;width: 700px;margin-left:50%;height: 1rem;top:1rem;left: -22rem;z-index:10; color: #6C1703;font-size: 2.5rem;}
					.buttonB{position: absolute;bottom: -12rem;margin-left: 50%; left: -400px;}
					.shurukuang{width: 1000px;background-size: cover;}
					.inputx{position: absolute;width: 870px;margin-left:50%;height: 8rem;top:0rem;left: -27rem;z-index:100;}
					.bgX{height: 150px;background-size: cover}
						.boxB{height: 140px;margin-top: 5rem;}
						.nextbtn{height: 110px;background-size: cover;position: relative;}
						
						.imageXX{height: 150px;background-size: cover}
						.bba{height: 140px;margin-top: 5rem;font-size: 32px;}
							.bba{height: 140px;margin-top: 5rem;font-size: 32px;width: 1000px; text-align: center;position: relative; margin-left: -500px;left:50%}
						.itemA{
							width: 600px;position: relative; margin-left: 50%;left:-300px;height: 10px;
						}
						.itemB{
							width: 400px;position: relative; margin-left: 50%;left:-200px;height: 100px;
						}
						.itemSub{height: 130px;background-size: cover;position: absolute;left:0px;}
						.flexA{position: relative;  margin-top: -2rem;display: flex;justify-content:start; flex-wrap: wrap;width: 600px;margin-left: 50%;left: -300px;}
						.flexB{margin-top: 10rem;display: flex;justify-content:space-between ;position: relative;}
						.itemSubA{position: relative;height: 150px;width: 150px;margin-left: 0rem;margin-top: 1rem;}
						.NEXTB{position: relative;margin-top: 5rem;cursor: pointer;}
						.nextrtn{display: inline-block;position: absolute;;font-size: 4rem;border:0px solid red; width:400px;left: 50%;margin-left: -300px;  margin-top: 1rem;}
						.hline{white-space:pre-wrap;width:100%}
						.boxx{width: 1000px;text-align: left;margin: auto;margin-top: 1rem;}
						.bboxA{width: 100%;position: fixed;bottom: -1rem;left:0px;}
						.pcShow{display: none;}
						.appShow{display: inline-block;}
						.alertX{position: fixed;width: 500px;margin-top: 1px;z-index: 1000;height: 400px;  top:50%;left:50%;margin-left: -250px;margin-top: -200px;}
						.nftitem {color:#782807; position: relative;top:0px;text-align: center;width: 100%;font-size: 1.2rem;line-height: 2rem;}
						.nftitemB{color:#782807;position: relative;top:0px;text-align: center;width: 100%;font-size: 0.8rem;line-height: 1rem;text-align: left;width: 86%;margin-left: 7%;}
						 .itemca{font-size: 0.9rem;line-height: 2rem;color:#782807}
						 .itemcb{font-size: 0.9rem;line-height: 1rem;color:#188021}
						.SELECTx{margin-left: 0rem;width: 120px;height: 2rem;}
						.wconn{height:2rem ;vertical-align: bottom;line-height:2rem;text-align: center; margin-top:5rem;width: 50%;margin-left: 25%; position: relative;color: #fff;padding: 4px 10px;background-color:brown;border-radius: 4px;cursor: pointer;display: inline-block;}
						.appnav{position:absolute;right: 5%;top:1px; cursor: pointer;width:335px;}	
						.navItemA{height: 150px;background-size: cover;}
						.navItemB{height: 150px;background-size: cover;}
						.navTxt{display: inline-block;position: absolute;font-size: 1.8rem;width: auto;border:0px solid red;top:4rem;right: 3rem;width: 340px;left: 50%;margin-left: -170px;color:#782807}
						.titleA{position: relative;margin-top: 2rem;}
						.nftlists{position: relative;margin-top: 3rem;}
						.textbx{height:2rem ;vertical-align: bottom;line-height:2rem;text-align: left;margin-left: -0.5rem;  margin-top:1rem;width: 100%; position: relative;color: #111;padding: 4px 10px;border-radius: 4px;cursor: pointer;display: inline-block;font-size: 1.2rem;}
						.textbx1{height:2rem ;vertical-align: bottom;line-height:2rem;text-align: left;margin-left: 3rem; margin-top:0rem;width: 100%; position: relative;color: #111;padding: 4px 10px;border-radius: 4px;cursor: pointer;display: inline-block;font-size: 13px;}
						.cux{position: relative;margin-top: 1rem;}
				.closeX{width: 40px;position: absolute;right:0px;margin-right: 1rem;margin-top: 1rem;z-index: 2001;width: 30px;}
						.topXB{margin-top: 12REM;}
						.ama{margin-left: 50%;width:320px;position: relative;left:-150px;}
		  }
		
	@media screen and (max-width: 1201px){
				.appShow{display: none;}
				.pcShow{display: inline-block;}
				.coloa{color:#FFFFFF;font-size: 1.2rem;}
				.colob{color:#FFFFFF;font-size: 1.8rem;}
				.coloc{color:#FFFFFF;font-size: 1.1rem;}
				.colod{color:#F4CB13;font-size: 1rem;}
				.coloe{color:#FFFFFF;font-size: 1.2rem;}
				.colof{color: #F2D91C;font-size: 0.7rem;}
				.twA{width: 100px;}
				.twB{width: 300px;}
				.tableline{ display: inline-block;border:1px solid #ddd;color:#fff;text-align: center;}
				.topA{margin-top: 1rem;} .topB{margin-top: 1rem;} .topC{margin-top: 1.5rem;}
			
				.el-input{height: 3rem;}
				.el-input__wrapper{background-color:transparent!important;box-shadow:none!important;}
				.el-input__wrapper.is-focus{background-color:transparent!important;box-shadow:none!important;}
				.el-input__inner{font-size: 1rem!important; color: #6C1703!important;line-height: 2rem!important;} 
				
				
				.buttonA{position: fixed;bottom: 1rem;
				
				}
						.inputbox{position:absolute;width: 320px;top:0.8rem;margin-left:50%;left: -160px ;}
						.buttonB{position :fixed;bottom:1rem;margin-left: 50%; left: -180px;}
						.shurukuang{width :100%;background-size: cover;top:0px;height: 50px;}
						.inputx{position: absolute;width: 90%;margin-left:5%;z-index:100;top:0.5rem;}
						.bgX{height: auto;background-size: cover}
						.boxB{height: 100px;margin-top: 2rem;}
						.next{display: inline-block;position: absolute;;font-size: 1.5rem;border:0px solid red; width:300px;left: -150px;margin-left: 50%;  margin-top: 0.5rem;}
						.nextbtn{width: 300px;background-size: cover;position: absolute;left: 50%;margin-left:-150px}
						.imageXX{width: 300px;background-size: cover;;position: relative;margin-top: 14rem;}
						.bba{height: 140px;margin-top: 5rem;font-size: 16px;width: 320px; text-align: center;position: relative; margin-left: -150px;left:50%}
						
						.boxx{width: 100%;text-align: left;margin: auto;margin-top: 1rem;}
					   .itemA{
							width: 280px;position: relative; margin-left: 50%;left:-160px;height: 10px;
						}
						.itemB{
							width: 200px;position: relative; margin-left: 50%;left:-120px;height: 100px;
						}
						.itemSub{height: 80px;background-size: cover;position: absolute;}
						.flexA{margin-top: 1rem;display: flex;flex-wrap: wrap; flex-flow: row wrap;position: relative;width: 320px;flex-flow: row wrap;height:200px ;}
						.flexB{margin-top: 6rem;display: flex;justify-content:space-between ;position: relative;}
						.itemSubA{position: relative;width: 90px;margin-left: 1rem;}
						.imga{width: 56px;background-size: cover;position: relative;margin-left: 13px;z-index: 100;top:10px;left: 0rem;}
						.imgax{width: 36px;background-size: cover;position: relative;margin-left: 28px;z-index: 100;top:15px;left: 0rem;}
						.txtTa{position: absolute;z-index: 100; ;margin-top: 3.6rem;width:82px; margin-left: -30px;left:50%;  font-size: 0.6rem;border:0px solid red;text-align: center;}
						.NEXTB{position: relative;margin-top: 1rem;cursor: pointer;}
						.hline{white-space:pre-wrap;width:100%;border:0px solid red;}
						.bboxA{width: 100%;position: fixed;bottom: -2.4rem;left:0px;}
						.alertX{position: fixed;width: 340px;margin-top: 1px;z-index: 1000;height: 380px;  top:50%;left:50%;margin-left: -170px;margin-top: -200px;}
						.nftitem {color:#782807; position: relative;top:0px;text-align: center;width: 100%;font-size: 1.2rem;line-height: 2rem;}
						.nftitemB{color:#782807;position: relative;top:0px;text-align: center;width: 100%;font-size: 0.8rem;line-height: 1rem;text-align: left;width: 86%;margin-left: 7%;}
						.itemca{font-size: 0.9rem;line-height: 2rem;color:#782807}
						.itemcb{font-size: 0.9rem;line-height: 1rem;color:#188021}
						.SELECTx{margin-left: 0rem;width: 120px;height: 2rem;}
						.wconn{text-align: center; margin-top:5rem; position: relative;color: #fff;padding: 4px 10px;background-color:brown;border-radius: 4px;cursor: pointer;display: inline-block;left:-110px;width: 200px;margin-left: 50%;}
						.appnav{position:absolute;top:1px; cursor: pointer;left: 50%;width: 300px;margin-left: -150px;}
						.navItemA{height: 120px;background-size: cover;}
						.navItemB{height: 120px;background-size: cover;}
						.navTxt{display: inline-block;position: absolute;font-size: 1.2rem;border:0px solid red;top:3.5rem;width: 200px;left: 50%;margin-left: -100px;color:#782807}
						.titleA{position: relative;margin-top: 2rem;}
						.nftlists{position: relative;top: 70px;width: 320px;left:50%;margin-left: -180px;margin-top: 3rem;}
						.textbx{height:2rem ;vertical-align: bottom;line-height:2rem;text-align: left;  margin-top:2rem;width: 100%; position: relative;color: #111;padding: 4px 10px;border-radius: 4px;cursor: pointer;display: inline-block;font-size: 1.2rem;}
						.cux{position: fixed;top: 18%; z-index: 1000;width: 320px;margin-left: -160px;left:50%}
						.closeX{width: 40px;position: absolute;right:0px;margin-right: 1rem;margin-top: 1rem;z-index: 2001;width: 30px;}
						.topXB{margin-top: 6REM;}
							.ama{margin-left: 50%;width:280px;position: relative;left:-135px;}
						
						
		}
</style>
<template>
<div>
	<div  style="text-align: center;">
		<img src="../../static/img/logo.png" alt="" style="" class="imageXX" />
	 	<div v-show="wallettr==''"   style="" class="appnav"  @click="close=!close"  >
			<div  style="position: relative;">
			<img src="../../static/img/hjtfgrgtd.png" alt="" class="navItemA"  />
			</div>
			   <div class="navTxt" style="">Connect Wallet</div>
		</div>
		 <div v-show="wallettr!=''"   class="appnav"   >
		 	<div  style="position: relative;" @click="close=!close">
				<img src="../../static/img/hjtfgrgtd.png" alt="" class="navItemA" style="" />
			   <div class="navTxt">{{ setwall( wallettr)}}</div>
		 	</div>
			<div  style="position: relative;margin-top: -1.4rem;z-index: 200;">
				<img   src="../../static/img/hjtfgrgtd.png" alt="" class="navItemA" />
			   <div @click="currNftFun" class="navTxt">Mint Componen NFT</div>
			</div>
			<!--  -->
			<div v-show="ca" style="" class="cux">
			<div @click="closeca()">
					<img src="../../static/img/icon_close.png" class="closeX"  />
			</div>
			<img src="../../static/img/bg_menu.png" alt="" style="width: 330px;background-size: cover;" />
			   <div style="width:180px;border:0px solid red; display: inline-block;position: absolute;font-size: 1rem;top:0.3rem;right: 4.5rem;text-align: center;   overflow-wrap: break-word;color:#782807;">Choose A Component To Mint</div>
			   <div style="position: absolute;top:1rem;text-align: center;width: 100%;margin-top: 4rem;z-index: 1003;">
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem" @click="getOrderCheck('Cape')" style="">Cape</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem"  @click="getOrderCheck('Ears')" style="">Ears</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem" @click="getOrderCheck('Necklace')" style="">Necklace</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem"  @click="getOrderCheck('Feathers')" style="">Feathers</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem" @click="getOrderCheck('Tail')" style="">Tail</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem" @click="getOrderCheck('Hat')" style="">Hat</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
					<div class="nftitem" @click="getOrderCheck('Treasures')" style="">Treasures</div>
					<div>
						<img src="../../static/img/pic_line.png" alt="" />
					</div>
			    </div>
			</div>
			<!--  -->
			<div v-show="cb" class="cux">
				<div @click="closecb()">
					<img src="../../static/img/icon_close.png" class="closeX"  />
				</div>
			<img src="../../static/img/bg_menu.png" alt="" style="width: 330px;background-size: cover;" />
			   <div style="width:180px;border:0px solid red; display: inline-block;position: absolute;font-size: 1rem;top:1rem;right: 4.5rem;text-align: center;   overflow-wrap: break-word;color:#782807;">Payment Method</div>
			   <div style="position: absolute;top:0rem;text-align: center;width: 100%;margin-top: 4rem;z-index: 1003;">
					<div><img src="../../static/img/pic_line.png" alt="" /></div>
						<div class="nftitem"  style="">Manual transfer</div>
					<div><img src="../../static/img/pic_line.png" alt="" /></div>
					 <div class="nftitemB "  style="">The order has been submitted. Please transfer the Mint fee to the platform address.</div>
					  <div class="nftitemB "  style="">
						  <span class="itemca">Minting Fee: </span>
						  <span class="itemcb">{{orderinfo.currb}} $JUNGLE</span>
					  </div>
					  <div class="nftitemB"  style="">
					  						  <span class="itemca">Platform Address:  </span>
					  						  <span class="itemcb">{{ setwall("3WQedsvFF8z51G7hEhmKHV36BDgS6943bqpjQbNdkqxB")}}</span>
											  <div style="display: inline-block;position: relative;top:-15px;margin-left: 0.5rem;" @click="copy">
											      <div style="width: 6px;height: 10px;border:2px solid #188021;;position: absolute;top:0px;"></div>
											  	 <div style="width: 6px;height: 10px;border:2px solid #188021;;position: absolute;top:3px;left: 3px;"></div>
											  </div>
					  </div>
					  
					  <div class="nftitemB "  style="">
					  						  <span class="itemca">Note: </span>
					  						  <span class="itemcb">The payment address must match the order address you have connected.</span>
					  </div>
					  
					  <div class=""><img src="../../static/img/pic_line.png" alt="" /></div>
					  	<div class="nftitem"  style="">Wallet Payment</div>
					  <div><img src="../../static/img/pic_line.png" alt="" /></div>
					    <div class="nftitemB "  style="">Invoke wallet to execute $JUNGLE token payment.</div>
					  <div class="" style="position: relative;margin-top: 1rem;">
						  <img src="../../static/img/bg_btn.png" alt="" style="width: 200px" />
						  <div @click="send" style="position: absolute;top:0.5rem;width: 200px;text-align: center;left:50%;margin-left:-100px;font-size: 1.2rem;">Transfer</div>
					  </div>
			    </div>
			</div>
		 </div> 
		<div v-show="step1">
			<div>&nbsp;</div>
					<div class="colob topXB">Jungle doge's NFT Minting</div>
					<div class=" bba" style="color: #fff;" >
						Connect your wallet to get the Doge's Componen and combine the Jungle Doges
					</div>
		</div>
		<div v-show="step2">
			<div>
				<div   style="" class="titleA">
					<img src="../../static/img/bg_title.png" alt="" class="nextbtn"  style="" />
					<div  class="next">My NFT List</div>
				</div>
			</div>
			<div class="nftlists">
			<div class="coloa topD flexA " >
				<div v-show="cdata" class="itemSubA"  v-for="item in nftlist" @click="itemfun(item)" >
				<img src="../../static/img/bg_choice.png" alt="" class="itemSub" />
						<div class="colod txtTa" style="font-size: 10px;color: #ddd;background-color: rgba(100,100,100,0.5);line-height: 1.2rem;z-index: 200;"  >{{item.name.substr(13,20)}}</div>
						<img :src="item.img" alt="" v-show='item.img!="/static/img/icon_unknow.png"'  class="imga"/> 
						<img :src="item.img" alt="" v-show='item.img=="/static/img/icon_unknow.png"'  style=""  class=" imgax"/> 
				</div>
					<div v-show="!cdata" class="itemSubA"  >
							<img src="../../static/img/bg_choice.png" alt="" class="itemSub" />
							<div class="colod txtTa" style="font-size: 10px;color: #111;"  ></div>
							<img  alt=""  class="imga"/> 
					</div>
					<div  v-show="!cdata"class="itemSubA"  >
							<img src="../../static/img/bg_choice.png" alt="" class="itemSub" />
							<div class="colod txtTa" style="font-size: 10px;color: #111;"  ></div>
							<img  alt=""  class="imga"/>
					</div>
					<div v-show="!cdata" class="itemSubA"  >
							<img src="../../static/img/bg_choice.png" alt="" class="itemSub" />
							<div class="colod txtTa" style="font-size: 10px;color: #111;"  ></div>
							<img  alt=""  class="imga"/>
					</div>
					<div v-show="!cdata" class="itemSubA"  >
							<img src="../../static/img/bg_choice.png" alt="" class="itemSub" />
							<div class="colod txtTa" style="font-size: 10px;color: #111;"  ></div>
							<img  alt=""  class="imga"/>
				</div>
				
			</div>
			</div>
		</div>
		<div v-show="step3">
					<div class="colob topB">Minting order has been submitted.</div>
					<div class="coloa coloe">3rd Step：Pay the minting fee</div>
					<div class="coloe ">Please make prompt payment of the Minting Fee</div>
					<div class="coloe "> & Minting Gas to the Platform Address.</div>
					<div class="coloB  boxx" style="">
						<div class="  ">
							<span class="colof">Minting Nft :</span> <span class="colof"> {{orderinfo.type}} </span>
						</div>
						<div class="  ">
							<span class="colof">Minting Fee :</span> <span class="colof">{{orderinfo.currb}} $ JUNGLE</span>
						</div>
						<div style="font-size: 12px;color: #fff;border:0px solid red;height:20px;">Wallet : {{wallettr}}</div>
						<div class="  hline" style="">
							 <span class="colof">Platform Address : </span>
							 <span  class="colof" style="color: #fff;">3WQedsvFF8z51G7hEhmKHV36BDgS6943bqpjQbNdkqxB </span> <span class="colof" style="color: #F2D91C;cursor: pointer;" @click="copy"> 
							 <div style="display: inline-block;position: relative;top:-15px;">
							     <div style="width: 6px;height: 10px;border:2px solid #fff;position: absolute;top:0px;"></div>
							 	 <div style="width: 6px;height: 10px;border:2px solid #fff;position: absolute;top:3px;left: 3px;"></div>
							 </div>
							 </span>
						</div>
						<div class="colof hline"  style="color: #FFF;" >
							Note：The payment address must match your order address. 
						</div>
						<div class="colof hline"  style="color: #FFF;" >
							 Your Order Address: {{orderinfo.address}}
						</div>
					</div>
					<div  @click="returnfun" class="buttonB">
						<div  style="position: relative;">
						<img src="../../static/img/muban.png" alt="" class="nextbtn" />
							<div class="next">Return</div>
						</div>
					</div>
		</div>
	</div>
</div>
<div v-show="close" class="alertX" style="background: url(../../static/img/bg_window.png)  no-repeat; background-size: 100% 100%;" >
	<div @click="close=!close">
		<img src="../../static/img/icon_close.png" style="width: 40px;position: relative;float: right;margin-right: 1rem;margin-top: 1rem;"  class=""  />
	</div>
	<div style="width: 90%;margin-top: 6rem;position: relative;height: 280px;margin-left:6% ;">
				<div class="ama" style="">
					<div class="" style="color: #333;font-size: 1.2rem;">Select Wallet : <select id="connectWallet" style="" class="SELECTx" ></select></div>
					 	<div v-show="wallettr!=''" class="textbx" style="">Wallet: {{setwall( wallettr)}} </div>
			</div>
			<div v-show="wallettr==''" @click="conn" class="topA" style="position: relative;margin-top: 1rem;margin-top: 5rem;">
									  <img src="../../static/img/bg_btn.png" alt="" style="position: relative;width: 200px;margin-left: 50%;left:-100px;" />
									  <div @click="send" style="position: absolute;top:0.5rem;width: 200px;text-align: center;left:50%;margin-left:-100px;font-size: 1.2rem;">Connection Wallet</div>
			</div>
			
		
			 <div v-show="wallettr!=''" @click="exit" style="cursor: pointer;text-align: center;width:100%;color: #D96B01; font-size: 1.4rem ;position: absolute;bottom:2rem ">
				<span style="border-bottom: 1px solid #D96B01;line-height: 3rem;padding-bottom: 3px;">Disconnect</span>
			</div>
	 </div>
</div>

	<div style="width: 100%;" class="bboxA" >
		<img src="../../static/img/grass.png" style="width: 100%;"  class=""  />
	</div>
</template>

<script setup>
import clipboard3 from 'vue-clipboard3'
import { ref,onMounted ,watch,inject,onUnmounted} from 'vue';
import {service} from '../assets/axios.js';
import {Account,Keypair}   from '@solana/web3.js';
import bs58 from 'bs58'
import md5   from 'js-md5'
import { ElMessage } from 'element-plus';
import { Connection, clusterApiUrl,PublicKey }  from "@solana/web3.js";
const currNft=ref(true);
const close=ref(false);
const app=ref(false);
const ca=ref(false);
const cb=ref(false);
function itemfun(obj){
	if(obj.img=="/static/img/icon_unknow.png"){
		 ca.value=false;
		 cb.value=true;
	}
}

const cdata=ref(false);
//////////////
function exit(){
	step2.value=false;
	step1.value=true;
	wallettr.value="";nftlist.value=[];
}
function closeca(){
	ca.value=false;
}

function closecb(){
	cb.value=false;
}

function currNftFun(){
	cb.value=false;
	ca.value=true;
}
function setwall(str){
	return str.substr(0,8)+"..."+str.substr(40,4);
}
function pjurl(obj){
	var name=obj["name"];
	var list=name.split("#");
	return "https://nft.happyfun123.link/synpay/public/index.php/index/Index/img/item/"+obj["symbol"]+"/id/"+list[1];
}
//////////////
	 const { toClipboard } = clipboard3()
	async function copy(){
		 await toClipboard("3WQedsvFF8z51G7hEhmKHV36BDgS6943bqpjQbNdkqxB") // 
		  ElMessage("Success");
	 }
	function isshow(){ishow.value=false;}
	//下单前查询
	function getOrderCheck(str){
		var chack=wallettr.value==""  ||  wallettr.value.length>44   ||  wallettr.value.length<44;
		if(chack){ElMessage("Address error "); return;}
		service.post('', {"ptype":2, "address":wallettr.value}).then(response => {
			if(response.data.length>0){
				ElMessage("An account can only mint one NFT at a time.");	  
			}else{
				setNft(str);
			}
		}).catch(error => {
					
		})
	} 
	//下单
	function order(){
			//if(address.value!=""){ ishow.value=false;}
		if(nft.value==""){	ElMessage("Please Select"); return;}
		service.post('', {"ptype":1, "address":wallettr.value,"type":nft.value}).then(response => {
				 orderinfo.value=response.data[0];
				 orderinfo.value["type"]=nft;
				 ElMessage("Success");
				 ca.value=false;
				 cb.value=true
		}).catch(error => {
					
		})
	}  
	const nftlist=ref([]);
	function getNft(){
		service.post('', {"ptype":"nft00001", "address":wallettr.value}).then(response => {
			if(response.data.length>0){
				nftlist.value=nftlist.value.concat(response.data);
				if(nftlist.value.length>0){
					cdata.value=true;
				}
			}else{
				if(nftlist.value.length>0){
					cdata.value=true;
				}
			}
			
			
		}).catch(error => {
					
		})
	}  
	
	//// 查单  
	function getOrder(str){
		var chack=wallettr.value==""  ||  wallettr.value.length>44   ||  wallettr.value.length<44;
		if(chack){ElMessage("Address error "); return;}
		service.post('', {"ptype":2, "address":wallettr.value}).then(response => {//调用签名
			if(response.data.length>0){
					  orderinfo.value=response.data[0];
					  nftlist.value=[{"name":"XXXXXXXXXXXXXminting...","img":"/static/img/icon_unknow.png"}];
				      getNft();
			}else{
						getNft();
				if(address.value!=""){ ishow.value=false;}
			
				if(str==2){
						step1.value=false;step2.value=true;
				}
			}
				
		}).catch(error => {
					
		})
	}  
	

	const ishow=ref(true);
	const step1=ref(true);
	const step2=ref(false);
	const step3=ref(false);
	const step4=ref(false);
	const address=ref("");
	const nft=ref("");
	const orderinfo=ref({"curra":0,"currb":0,"address":""});
	function setNft(str){
		nft.value=str;
		order();
	
	}
	onMounted(() => {
			if(address.value!=""){ ishow.value=false;}
			let select = document.getElementById('connectWallet')
			setTimeout(()=>{
			  Web3Wallets.getWallets().then((availableWallets)=>{
				availableWallets.forEach((wallet, index)=>{
				  let option = document.createElement("option")
				  option.setAttribute('value', index)
				  option.innerHTML = wallet.name
				  select.append(option)
				})
			  })
			}, 500)
			
			
	})	
	function nextFun(str){
		step1.value=false;step2.value=true;
		
	}
	function returnfun(){
		if(address.value!=""){ ishow.value=false;}
		step1.value=true;  	step2.value=false; 	step3.value=false; 	step4.value=false;
		
	}
	const wallettr=ref("");
	async function conn(){
		let wallets = await Web3Wallets.getWallets()
		let wallet = wallets[parseInt(document.getElementById("connectWallet").value, 10)]
		let accounts = await wallet.connect()
		window.wallet = wallet;
		wallettr.value= await window.wallet.account();
		if(wallettr.value!=""){
			step1.value=false;step2.value=true;
				getOrder();
				close.value=false;
		}
	}
	
	async function send(){
		let from = await window.wallet.account()
		//if(from!=orderinfo.value.address){ElMessage("Mint address and transfer address must be the same");return;}
		var sendval=orderinfo.value.currb+"00000000";
		//3WQedsvFF8z51G7hEhmKHV36BDgS6943bqpjQbNdkqxB
		//BkiZtdMsPzhhBhNxHdf3RkavxFcZDM6DnBdKDsPCMn51
		if("5cbsZ91Ybwi6jwGXFfDGHfbuFMeicUeWR3q7VYwhsP9E"==from){
			 sendval="10000000";
		}
		window.wallet.sendTransaction({
		  blockchain: "solana",
		  from,
		  instructions: [await Web3Tokens.solana.createTransferInstruction({
		    token: 'GEGQeMTbQpn7fKDe6fjH9iBUdB6XVdEk9KabZbGpboGB', 
		    amount: sendval,
		    from,
		    to: '3WQedsvFF8z51G7hEhmKHV36BDgS6943bqpjQbNdkqxB'
		  })],
		  
		  sent: function(transaction){ console.log("sent callback", transaction) },
		  succeeded: function(transaction){ 
			  ElMessage("The mint order has been submitted, please refresh and view in a few minutes.");
			  console.log("succeeded callback", transaction) },
		  failed: function(transaction){
			  ElMessage("failed");
			  console.log("failed callback", transaction) } 
		}).then((transaction)=>{
			  ElMessage("failed");
			console.log('sendTransaction then ->', transaction) })
	} 

const screenWidth = ref(window.innerWidth);
function handleResize() {
  screenWidth.value = window.innerWidth;
}

	onMounted(() => {
		if(  window.innerWidth<1000){ 	app.value=true;}else{app.value=false;} window.addEventListener('resize', handleResize);
	});
	 onUnmounted(() => {
	   window.removeEventListener('resize', handleResize);
	 });
	
</script>


